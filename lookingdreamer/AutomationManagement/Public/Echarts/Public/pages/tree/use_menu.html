<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>右键菜单树</title>
    <link href="css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="css/style.css" rel="stylesheet" media="screen">
    <link href="css/main.css" rel="stylesheet" media="screen">
    <link href="css/font-awesome.css" rel="stylesheet">
    <link href="css/koala_tree.css" rel="stylesheet">

    <script src="js/jquery.js" type="text/javascript"></script>
    <script src="js/bootstrap.js" type="text/javascript"></script>
    <script src="js/koala_tree.js" type="text/javascript"></script>
</head>
<body>
<div class="container">
    <div class="tree" id="ex-tree-menu" style="height: 600px;"></div>
</div>

<div id="dropdown" class="dropdown clearfix" style="display: none;">
    <ul style="display: block; position: static; margin-bottom: 5px;" aria-labelledby="dropdownMenu" role="menu"
        class="dropdown-menu">
        <li><a href="javascript:void(0)" tabindex="-1">增加用户</a></li>
        <li><a href="javascript:void(0)" tabindex="-1">修改用户</a></li>
        <li><a href="javascript:void(0)" tabindex="-1">查询用户</a></li>
        <li class="divider"></li>
        <li class="dropdown-submenu">
            <a href="javascript:void(0)" tabindex="-1">更多选项</a>
            <ul class="dropdown-menu">
                <li><a href="javascript:void(0)" tabindex="-1">二级链接</a></li>
                <li><a href="javascript:void(0)" tabindex="-1">二级链接</a></li>
                <li><a href="javascript:void(0)" tabindex="-1">二级链接</a></li>
                <li><a href="javascript:void(0)" tabindex="-1">二级链接</a></li>
                <li><a href="javascript:void(0)" tabindex="-1">二级链接</a></li>
            </ul>
        </li>
    </ul>
</div>
<script type="text/javascript">
    //可以允许通过json数据绑定
    $(function () {
        var $dropdown = $("#dropdown");
        var data = [
            {"parentId": "root", "menu": {"id": "001", "title": "权限管理", "href": "#"}, "children": {"001001": {"parentId": "001", "menu": {"id": "001001", "title": "用户管理", "href": "#"}, "children": {"001001001": {"parentId": "001001", "menu": {"id": "001001001", "title": "添加新用户", "href": "#"}, "children": {}}, "001001002": {"parentId": "001001", "menu": {"id": "001001002", "title": "系统用户查询", "href": "#"}, "children": {}}}}, "001002": {"parentId": "001", "menu": {"id": "001002", "title": "角色管理", "href": "#"}, "children": {"001002001": {"parentId": "001002", "menu": {"id": "001002001", "title": "添加新角色", "href": "#"}, "children": {}}, "001002002": {"parentId": "001002", "menu": {"id": "001002002", "title": "用户角色配置", "href": "#"}, "children": {}}, "001002003": {"parentId": "001002", "menu": {"id": "001002003", "title": "角色权限配置", "href": "#"}, "children": {}}}}, "001003": {"parentId": "001", "menu": {"id": "001003", "title": "菜单管理", "href": "#"}, "children": {}}}},
            {"parentId": "root", "menu": {"id": "002", "title": "系统管理", "href": "#"}, "children": {"002001": {"parentId": "002", "menu": {"id": "002001", "title": "功能配置", "href": "#"}, "children": {}}, "002002": {"parentId": "002", "menu": {"id": "002002", "title": "系统访问记录", "href": "#"}, "children": {}}}},
            {"parentId": "root", "menu": {"id": "003", "title": "日志管理", "href": "#"}, "children": {"003001": {"parentId": "003", "menu": {"id": "003001", "title": "日志查询", "href": "#"}, "children": {}}}}
        ];
        var dataSourceTree = {
            data: data,
            delay: 400
        };
        $('#ex-tree-menu').tree({
            dataSource: dataSourceTree,
            loadingHTML: '<div class="static-loader">Loading...</div>',
            multiSelect: false,
            cacheItems: true,
            draggable: false,
            mouseMenu: $dropdown
        });

        $("a[tabindex=-1]").click(function () {
            $("#dropdown").hide();
        })
    })
</script>

</body>
</html>