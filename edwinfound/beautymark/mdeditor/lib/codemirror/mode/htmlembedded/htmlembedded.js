(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed"],a):a(CodeMirror)})(function(a){a.defineMode("htmlembedded",function(h,e){function f(c,a){return c.match(k,!1)?(a.token=g,b.token(c,a.scriptState)):d.token(c,a.htmlState)}function g(c,a){return c.match(l,!1)?(a.token=f,d.token(c,a.htmlState)):b.token(c,a.scriptState)}var k=e.scriptStartRegex||
/^<%/i,l=e.scriptEndRegex||/^%>/i,b,d;return{startState:function(){b=b||a.getMode(h,e.scriptingModeSpec);d=d||a.getMode(h,"htmlmixed");return{token:e.startOpen?g:f,htmlState:a.startState(d),scriptState:a.startState(b)}},token:function(a,b){return b.token(a,b)},indent:function(a,e){if(a.token==f)return d.indent(a.htmlState,e);if(b.indent)return b.indent(a.scriptState,e)},copyState:function(c){return{token:c.token,htmlState:a.copyState(d,c.htmlState),scriptState:a.copyState(b,c.scriptState)}},innerMode:function(a){return a.token==
g?{state:a.scriptState,mode:b}:{state:a.htmlState,mode:d}}}},"htmlmixed");a.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"});a.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"});a.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"});a.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"})});