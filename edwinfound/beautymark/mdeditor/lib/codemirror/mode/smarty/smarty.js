(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)})(function(d){d.defineMode("smarty",function(d){var m="}",k="{",n=2;d.hasOwnProperty("leftDelimiter")&&(k=d.leftDelimiter);d.hasOwnProperty("rightDelimiter")&&(m=d.rightDelimiter);d.hasOwnProperty("smartyVersion")&&3===d.smartyVersion&&(n=3);var p=["debug","extends","function","include","literal"],l,q=/[+\-*&%=<>!?]/,
g=/[a-zA-Z0-9_]/,r=/['"]/,e={cont:function(c,a){l=a;return c},chain:function(c,a,b){a.tokenize=b;return b(c,a)}},f={tokenizer:function(c,a){if(c.match(k,!0)){if(c.eat("*"))return e.chain(c,a,f.inBlock("comment","*"+m));a.depth++;var b=c.eol(),d=/\s/.test(c.peek());if(3===n&&"{"===k&&(b||d))return a.depth--,null;a.tokenize=f.smarty;l="startTag";return"tag"}c.next();return null},smarty:function(c,a){if(c.match(m,!0))return 3===n?(a.depth--,0>=a.depth&&(a.tokenize=f.tokenizer)):a.tokenize=f.tokenizer,
e.cont("tag",null);if(c.match(k,!0))return a.depth++,e.cont("tag","startTag");var b=c.next();if("$"==b)return c.eatWhile(g),e.cont("variable-2","variable");if("|"==b)return e.cont("operator","pipe");if("."==b)return e.cont("operator","property");if(r.test(b))return a.tokenize=f.inAttribute(b),e.cont("string","string");if(q.test(b))return c.eatWhile(q),e.cont("operator","operator");if("["==b||"]"==b)return e.cont("bracket","bracket");if("("==b||")"==b)return e.cont("bracket","operator");if(/\d/.test(b))return c.eatWhile(/\d/),
e.cont("number","number");if("variable"==a.last){if("@"==b)return c.eatWhile(g),e.cont("property","property");if("|"==b)return c.eatWhile(g),e.cont("qualifier","modifier")}else{if("pipe"==a.last)return c.eatWhile(g),e.cont("qualifier","modifier");if("whitespace"==a.last)return c.eatWhile(g),e.cont("attribute","modifier")}if("property"==a.last)return c.eatWhile(g),e.cont("property",null);if(/\s/.test(b))return l="whitespace",null;var d="";"/"!=b&&(d+=b);for(var h=null;h=c.eat(g);)d+=h;for(var h=0,
t=p.length;h<t;h++)if(p[h]==d)return e.cont("keyword","keyword");return/\s/.test(b)?null:e.cont("tag","tag")},inAttribute:function(c){return function(a,b){for(var d=null,e=null;!a.eol();){e=a.peek();if(a.next()==c&&"\\"!==d){b.tokenize=f.smarty;break}d=e}return"string"}},inBlock:function(c,a){return function(b,d){for(;!b.eol();){if(b.match(a)){d.tokenize=f.tokenizer;break}b.next()}return c}}};return{startState:function(){return{tokenize:f.tokenizer,mode:"smarty",last:null,depth:0}},token:function(c,
a){var b=a.tokenize(c,a);a.last=l;return b},electricChars:""}});d.defineMIME("text/x-smarty","smarty")});